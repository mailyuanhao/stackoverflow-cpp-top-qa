# C 和 C++ 里面 main 函数应该返回什么？

## 回答

main 函数的返回值应该指明程序是怎么结束的。正常结束通常由 main 函数返回 0 来表示。非正常结束通常用 非零 值来表示，但是并没有标准来规定 非零 应该被如何解析。 void main() 这种写法是被 C++ 标准明确禁止使用的。有效的 C++ main 签名如下：

```C++
int main()
```

和

```C++
int main(int argc, char* argv[])
```

和下面是等价的

```C++
int main(int argc, char** argv)
```

C++ 还有一点没甚意义的地方， int main() 可以不写返回语句，这种情况下，默认返回 0. 对 C99 来说同样适用这个规则。至于是否要忽略 return 0 语句，是有争议的。不过 C 程序的 有效 的 main 函数签名的范围很广。

而且 对 main 函数来说签名也无关性能，因为在 C++ 中它只能进入离开一次（代表程序的开始结束）。 不过在 C 里面情况有一点不同， 重入 main 函数是允许的，只不过在实践中要避免这种事情。

